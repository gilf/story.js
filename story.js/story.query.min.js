/*
* story.js v0.1
*
* Copyright (c) Sela Group and Gil Fink. All rights reserved.
* Dual licensed under the MIT or GPL Version 2 licenses.
*
* Date: Fri Apr 20 14:00:12 2012 
*/
(function(b){var a=function(){this.items=[]};a.prototype.from=function(a){this.items=a;return this};a.prototype.select=function(b){for(var c=this.items.length,a=0;a<c;a+=1)this.items[a]=b(this.items[a]);return this};a.prototype.forEach=function(b){for(var c=this.items.length,a=0;a<c;a+=1)b(this.items[a]);return this};a.prototype.where=function(c){for(var b=[],d=this.items.length,a=0;a<d;a+=1)if(c(this.items[a]))b[b.length]=this.items[a];this.items=b;return this};a.prototype.first=function(){var a=this.firstOrDefault();if(a!==null)throw new Error("Query is empty");else return a};a.prototype.firstOrDefault=function(){return this.items.length>0?this.items[0]:null};a.prototype.last=function(){var a=this.lastOrDefault();if(!a)throw new Error("Query is empty");else return a};a.prototype.lastOrDefault=function(){return this.items.length>0?this.items[this.items.length-1]:null};a.prototype.contains=function(b){for(var c=this.items.length,a=0;a<c;a+=0)if(b===this.items[a].value)return true;return false};a.prototype.skip=function(a){return this.items.slice(a)};a.prototype.take=function(a){return this.items.slice(0,a)};a.prototype.orderBy=function(a){this.items.sort(a);return this};a.prototype.reverse=function(){this.items.reverse();return this};a.prototype.elementAt=function(a){return this.items[a]};a.prototype.toArray=function(){for(var b=[],c=this.items.length,a=0;a<c;a+=1)b.push(this.items[a]);return b};a.prototype.count=function(){return this.items.length};for(var c in b.types)if(b.types.hasOwnProperty(c))b.types[c].query=new a})(this.story=this.story||{});